{% extends "base.html.twig" %}

{% block title %}{{ parent() }} - Projets{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" type="text/css" href="{{ asset('css/members.css') }}" />
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="{{ asset('js/members.js') }}"></script>
{% endblock %}

{% block body %}
    <div id="dashboard">
        <div id="profile-card">
            <header>
                <h3>{{ app.user.username }}</h3>
            </header>
            <section>

            </section>
        </div>
        <div id="communities-card">
            <header>
                <h3>{{ 'communities.mine' | trans }}</h3>
            </header>
            <section>
                {% for communityMembership in communities %}
                    {% set community = communityMembership.community %}
                    <a href="{{ path('community_details', {"slug": community.slug}) }}" class="community">
                        <header>
                            {% if community.picture is not null %}
                                <img src="{{ asset(community.picture.getWebPath()) }}"/>
                            {% endif %}
                            <h4>{{ community.name }}</h4>
                        </header>
                    </a>
                {% endfor %}
            </section>
            <footer>
                {% if is_granted('ROLE_LEAD') %}
                    <a href="{{ path('new_community') }}" class="button">
                        {{ 'communities.creation.title' | trans }}
                    </a>
                {% endif %}
                <a href="{{ path('communities_list') }}" class="button">
                    {{ 'communities.list' | trans }}
                </a>
            </footer>
        </div>
    </div>
{% endblock %}


